(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-login-forgetpwd"],{"019f":function(e,t,A){"use strict";A.r(t);var a=A("781d"),r=A("999b");for(var n in r)"default"!==n&&function(e){A.d(t,e,(function(){return r[e]}))}(n);A("783e");var i,o=A("f0c5"),s=Object(o["a"])(r["default"],a["b"],a["c"],!1,null,"95e09afe",null,!1,a["a"],i);t["default"]=s.exports},"01e4":function(e,t,A){var a=A("6b5a");"string"===typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);var r=A("4f06").default;r("61a36a64",a,!0,{sourceMap:!1,shadowMode:!1})},"0fd8":function(e,t,A){var a=A("24fb");t=a(!1),t.push([e.i,'@charset "UTF-8";\n/**\n * 下方引入的为uView UI的集成样式文件，为scss预处理器，其中包含了一些"u-"开头的自定义变量\n * uView自定义的css类名和scss变量，均以"u-"开头，不会造成冲突，请放心使用 \n */.u-code-wrap[data-v-3f7be65c]{width:0;height:0;position:fixed;z-index:-1}',""]),e.exports=t},"21cb":function(e,t,A){"use strict";A.r(t);var a=A("a901"),r=A.n(a);for(var n in a)"default"!==n&&function(e){A.d(t,e,(function(){return a[e]}))}(n);t["default"]=r.a},"232a":function(e,t,A){var a=A("89e2");"string"===typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);var r=A("4f06").default;r("c07a5256",a,!0,{sourceMap:!1,shadowMode:!1})},"24ba":function(e,t,A){"use strict";var a=A("7315"),r=A.n(a);r.a},"474b":function(e,t,A){"use strict";var a;A.d(t,"b",(function(){return r})),A.d(t,"c",(function(){return n})),A.d(t,"a",(function(){return a}));var r=function(){var e=this,t=e.$createElement,A=e._self._c||t;return A("v-uni-view",{staticClass:"u-code-wrap"})},n=[]},"6b5a":function(e,t,A){var a=A("24fb");t=a(!1),t.push([e.i,'@charset "UTF-8";\n/**\n * 下方引入的为uView UI的集成样式文件，为scss预处理器，其中包含了一些"u-"开头的自定义变量\n * uView自定义的css类名和scss变量，均以"u-"开头，不会造成冲突，请放心使用 \n */.u-avatar[data-v-21bdd9ea]{display:-webkit-inline-box;display:-webkit-inline-flex;display:inline-flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;font-size:%?28?%;color:#606266;border-radius:10px;position:relative}.u-avatar__img[data-v-21bdd9ea]{width:100%;height:100%}.u-avatar__sex[data-v-21bdd9ea]{position:absolute;width:%?32?%;color:#fff;height:%?32?%;\ndisplay:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;\n-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;align-items:center;border-radius:%?100?%;top:5%;z-index:1;right:-7%;border:1px #fff solid}.u-avatar__sex--man[data-v-21bdd9ea]{background-color:#2979ff}.u-avatar__sex--woman[data-v-21bdd9ea]{background-color:#fa3534}.u-avatar__sex--none[data-v-21bdd9ea]{background-color:#f90}.u-avatar__level[data-v-21bdd9ea]{position:absolute;width:%?32?%;color:#fff;height:%?32?%;\ndisplay:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;\n-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;align-items:center;border-radius:%?100?%;bottom:5%;z-index:1;right:-7%;border:1px #fff solid;background-color:#f90}',""]),e.exports=t},7315:function(e,t,A){var a=A("0fd8");"string"===typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);var r=A("4f06").default;r("64321453",a,!0,{sourceMap:!1,shadowMode:!1})},"781d":function(e,t,A){"use strict";A.d(t,"b",(function(){return r})),A.d(t,"c",(function(){return n})),A.d(t,"a",(function(){return a}));var a={faNavbar:A("d1e5").default,uAvatar:A("f1ed").default,uForm:A("464c").default,uFormItem:A("5ec4").default,uRadioGroup:A("6dbd").default,uRadio:A("986b").default,uInput:A("bbfd").default,uButton:A("871b").default,uVerificationCode:A("858a").default},r=function(){var e=this,t=e.$createElement,A=e._self._c||t;return A("v-uni-view",{},[A("fa-navbar",{attrs:{title:"忘记密码"}}),A("v-uni-view",{staticClass:"login"},[A("v-uni-view",{staticClass:"u-text-center"},[A("u-avatar",{attrs:{size:150}})],1),A("v-uni-view",{staticClass:"u-m-t-50"},[A("u-form",{ref:"uForm",attrs:{model:e.form}},[A("u-form-item",{attrs:{"label-position":e.labelPosition,label:"类 型:","label-width":"120"}},[A("u-radio-group",{attrs:{width:e.radioCheckWidth,wrap:e.radioCheckWrap},on:{change:function(t){arguments[0]=t=e.$handleEvent(t),e.radioGroupChange.apply(void 0,arguments)}},model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}},[A("u-radio",{attrs:{shape:"circle","active-color":e.theme.bgColor,name:"email"}},[e._v("邮箱")]),A("u-radio",{attrs:{shape:"circle","active-color":e.theme.bgColor,name:"mobile"}},[e._v("手机")])],1)],1),A("u-form-item",{attrs:{"label-position":e.labelPosition,label:"email"==e.form.type?"邮 箱:":"手机号:",prop:"account","label-width":"120"}},[A("u-input",{attrs:{border:e.border,placeholder:"email"==e.form.type?"请填写邮箱":"请填写手机号码"},model:{value:e.form.account,callback:function(t){e.$set(e.form,"account",t)},expression:"form.account"}})],1),A("u-form-item",{attrs:{"label-position":e.labelPosition,label:"验证码:",prop:"captcha","label-width":"120"}},[A("u-input",{attrs:{border:e.border,placeholder:"请输入验证码",type:"text"},model:{value:e.form.captcha,callback:function(t){e.$set(e.form,"captcha",t)},expression:"form.captcha"}}),A("u-button",{attrs:{slot:"right",type:"primary","hover-class":"none","custom-style":{backgroundColor:e.theme.bgColor,color:e.theme.color},size:"mini"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.getCode.apply(void 0,arguments)}},slot:"right"},[e._v(e._s(e.codeTips))])],1),A("u-form-item",{attrs:{"label-position":e.labelPosition,label:"新密码:",prop:"newpassword","label-width":"120"}},[A("u-input",{attrs:{"password-icon":!0,border:e.border,type:"password",placeholder:"请输入密码"},model:{value:e.form.newpassword,callback:function(t){e.$set(e.form,"newpassword",t)},expression:"form.newpassword"}})],1)],1)],1),A("v-uni-view",{staticClass:"u-m-t-80"},[A("u-button",{attrs:{type:"primary","hover-class":"none","custom-style":{backgroundColor:e.theme.bgColor,color:e.theme.color},shape:"circle"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.submit.apply(void 0,arguments)}}},[e._v("提交")])],1),A("u-verification-code",{ref:"uCode",attrs:{seconds:"60"},on:{change:function(t){arguments[0]=t=e.$handleEvent(t),e.codeChange.apply(void 0,arguments)}}})],1)],1)},n=[]},"783e":function(e,t,A){"use strict";var a=A("232a"),r=A.n(a);r.a},"858a":function(e,t,A){"use strict";A.r(t);var a=A("474b"),r=A("ceba");for(var n in r)"default"!==n&&function(e){A.d(t,e,(function(){return r[e]}))}(n);A("24ba");var i,o=A("f0c5"),s=Object(o["a"])(r["default"],a["b"],a["c"],!1,null,"3f7be65c",null,!1,a["a"],i);t["default"]=s.exports},"89e2":function(e,t,A){var a=A("24fb");t=a(!1),t.push([e.i,"uni-page-body[data-v-95e09afe]{background-color:#fff}.login[data-v-95e09afe]{padding:20% 15%}body.?%PAGE?%[data-v-95e09afe]{background-color:#fff}",""]),e.exports=t},"999b":function(e,t,A){"use strict";A.r(t);var a=A("f0cb"),r=A.n(a);for(var n in a)"default"!==n&&function(e){A.d(t,e,(function(){return a[e]}))}(n);t["default"]=r.a},a901:function(e,t,A){"use strict";A("a9e3"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a="data:image/jpg;base64,/9j/4QAYRXhpZgAASUkqAAgAAAAAAAAAAAAAAP/sABFEdWNreQABAAQAAAA8AAD/4QMraHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLwA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/PiA8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJBZG9iZSBYTVAgQ29yZSA1LjMtYzAxMSA2Ni4xNDU2NjEsIDIwMTIvMDIvMDYtMTQ6NTY6MjcgICAgICAgICI+IDxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+IDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bXA6Q3JlYXRvclRvb2w9IkFkb2JlIFBob3Rvc2hvcCBDUzYgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjREMEQwRkY0RjgwNDExRUE5OTY2RDgxODY3NkJFODMxIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjREMEQwRkY1RjgwNDExRUE5OTY2RDgxODY3NkJFODMxIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6NEQwRDBGRjJGODA0MTFFQTk5NjZEODE4Njc2QkU4MzEiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6NEQwRDBGRjNGODA0MTFFQTk5NjZEODE4Njc2QkU4MzEiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz7/7gAOQWRvYmUAZMAAAAAB/9sAhAAGBAQEBQQGBQUGCQYFBgkLCAYGCAsMCgoLCgoMEAwMDAwMDBAMDg8QDw4MExMUFBMTHBsbGxwfHx8fHx8fHx8fAQcHBw0MDRgQEBgaFREVGh8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx//wAARCADIAMgDAREAAhEBAxEB/8QAcQABAQEAAwEBAAAAAAAAAAAAAAUEAQMGAgcBAQAAAAAAAAAAAAAAAAAAAAAQAAIBAwICBgkDBQAAAAAAAAABAhEDBCEFMVFBYXGREiKBscHRMkJSEyOh4XLxYjNDFBEBAAAAAAAAAAAAAAAAAAAAAP/aAAwDAQACEQMRAD8A/fAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHbHFyZ/Dam+yLA+Z2L0Pjtyj2poD4AAAAAAAAAAAAAAAAAAAAAAAAKWFs9y6lcvvwQeqj8z9wFaziY1n/HbUX9XF97A7QAGXI23EvJ1goyfzR0YEfN269jeZ+a03pNe0DIAAAAAAAAAAAAAAAAAAAACvtO3RcVkXlWutuL9YFYAAAAAOJRjKLjJVi9GmB5/csH/mu1h/in8PU+QGMAAAAAAAAAAAAAAAAAAaMDG/6MmMH8C80+xAelSSVFolwQAAAAAAAHVlWI37ErUulaPk+hgeYnCUJuElSUXRrrQHAAAAAAAAAAAAAAAAABa2Oz4bM7r4zdF2ICmAAAAAAAAAg7zZ8GX41wuJP0rRgYAAAAAAAAAAAAAAAAAD0m2R8ODaXU33tsDSAAAAAAAAAlb9HyWZcnJd9PcBHAAAAAAAAAAAAAAAAAPS7e64Vn+KA0AAAAAAAAAJm+v8Ftf3ewCKAAAAAAAAAAAAAAAAAX9muqeGo9NttP06+0DcAAAAAAAAAjb7dTu2ra+VOT9P8AQCWAAAAAAAAAAAAAAAAAUNmyPt5Ltv4bui/kuAF0AAAAAAADiUlGLlJ0SVW+oDzOXfd/Ind6JPRdS0QHSAAAAAAAAAAAAAAAAAE2nVaNcGB6Lbs6OTao9LsF51z60BrAAAAAABJ3jOVHjW3r/sa9QEgAAAAAAAAAAAAAAAAAAAPu1duWriuW34ZR4MC9hbnZyEoy8l36XwfYBsAAADaSq9EuLAlZ+7xSdrGdW9Hc5dgEdtt1erfFgAAAAAAAAAAAAAAAAADVjbblX6NR8MH80tEBRs7HYivyzlN8lovaBPzduvY0m6eK10TXtAyAarO55lpJK54orolr+4GqO/Xaea1FvqbXvA+Z77kNeW3GPbV+4DJfzcm/pcm3H6Vou5AdAFLC2ed2Pjv1txa8sV8T6wOL+yZEKu1JXFy4MDBOE4ScZxcZLinoB8gAAAAAAAAAAAB242LeyJ+C3GvN9C7QLmJtePYpKS+5c+p8F2IDYAANJqj1T4oCfk7Nj3G5Wn9qXJax7gJ93Z82D8sVNc4v30A6Xg5i42Z+iLfqARwcyT0sz9MWvWBps7LlTf5Grce9/oBTxdtxseklHxT+uWr9AGoAB138ezfj4bsFJdD6V2MCPm7RdtJzs1uW1xXzL3gTgAAAAAAAAADRhYc8q74I6RWs5ckB6GxYtWLat21SK731sDsAAAAAAAAAAAAAAAASt021NO/YjrxuQXT1oCOAAAAAAABzGLlJRSq26JAelwsWONYjbXxcZvmwO8AAAAAAAAAAAAAAAAAAef3TEWPkVivx3NY9T6UBiAAAAAABo2+VmGXblddIJ8eivRUD0oAAAAAAAAAAAAAAAAAAAYt4tKeFKVNYNSXfRgefAAAAAAAAr7VuSSWPedKaW5v1MCsAAAAAAAAAAAAAAAAAAIe6bj96Ts2n+JPzSXzP3ATgAAAAAAAAFbbt1UUrOQ9FpC4/UwK6aaqtU+DAAAAAAAAAAAAAAA4lKMIuUmoxWrb4ARNx3R3q2rLpa4Sl0y/YCcAAAAAAAAAAANmFud7G8r89r6X0dgFvGzLGRGtuWvTF6NAdwAAAAAAAAAAAy5W442PVN+K59EePp5ARMvOv5MvO6QXCC4AZwAAAAAAAAAAAAAcxlKLUotprg1owN+PvORborq+7Hnwl3gUbO74VzRydt8pKn68ANcJwmqwkpLmnUDkAAAAfNy9atqtyagut0AxXt5xIV8Fbj6lRd7Am5G65V6qUvtwfyx94GMAAAAAAAAAAAAAAAAAAAOU2nVOj5gdsc3LiqRvTpyqwOxbnnrhdfpSfrQB7pnv/AGvuS9gHXPMy5/Fem1yq0v0A6W29XqwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAf//Z",r={name:"u-avatar",props:{bgColor:{type:String,default:"transparent"},src:{type:String,default:""},size:{type:[String,Number],default:"default"},mode:{type:String,default:"circle"},text:{type:String,default:""},imgMode:{type:String,default:"aspectFill"},index:{type:[String,Number],default:""},sexIcon:{type:String,default:"man"},levelIcon:{type:String,default:"level"},levelBgColor:{type:String,default:""},sexBgColor:{type:String,default:""},showSex:{type:Boolean,default:!1},showLevel:{type:Boolean,default:!1}},data:function(){return{error:!1,avatar:this.src?this.src:a}},watch:{src:function(e){e?(this.avatar=e,this.error=!1):(this.avatar=a,this.error=!0)}},computed:{wrapStyle:function(){var e={};return e.height="large"==this.size?"120rpx":"default"==this.size?"90rpx":"mini"==this.size?"70rpx":this.size+"rpx",e.width=e.height,e.flex="0 0 ".concat(e.height),e.backgroundColor=this.bgColor,e.borderRadius="circle"==this.mode?"500px":"5px",this.text&&(e.padding="0 6rpx"),e},imgStyle:function(){var e={};return e.borderRadius="circle"==this.mode?"500px":"5px",e},uText:function(){return String(this.text)[0]},uSexStyle:function(){var e={};return this.sexBgColor&&(e.backgroundColor=this.sexBgColor),e},uLevelStyle:function(){var e={};return this.levelBgColor&&(e.backgroundColor=this.levelBgColor),e}},methods:{loadError:function(){this.error=!0,this.avatar=a},click:function(){this.$emit("click",this.index)}}};t.default=r},b0dc:function(e,t,A){"use strict";var a=A("01e4"),r=A.n(a);r.a},c71c:function(e,t,A){"use strict";A.d(t,"b",(function(){return r})),A.d(t,"c",(function(){return n})),A.d(t,"a",(function(){return a}));var a={uIcon:A("6efb").default},r=function(){var e=this,t=e.$createElement,A=e._self._c||t;return A("v-uni-view",{staticClass:"u-avatar",style:[e.wrapStyle],on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.click.apply(void 0,arguments)}}},[!e.uText&&e.avatar?A("v-uni-image",{staticClass:"u-avatar__img",style:[e.imgStyle],attrs:{src:e.avatar,mode:e.imgMode},on:{error:function(t){arguments[0]=t=e.$handleEvent(t),e.loadError.apply(void 0,arguments)}}}):e.uText?A("v-uni-text",{staticClass:"u-line-1",style:{fontSize:"38rpx"}},[e._v(e._s(e.uText))]):e._t("default"),e.showSex?A("v-uni-view",{staticClass:"u-avatar__sex",class:["u-avatar__sex--"+e.sexIcon],style:[e.uSexStyle]},[A("u-icon",{attrs:{name:e.sexIcon,size:"20"}})],1):e._e(),e.showLevel?A("v-uni-view",{staticClass:"u-avatar__level",style:[e.uLevelStyle]},[A("u-icon",{attrs:{name:e.levelIcon,size:"20"}})],1):e._e()],2)},n=[]},ceba:function(e,t,A){"use strict";A.r(t);var a=A("f9be"),r=A.n(a);for(var n in a)"default"!==n&&function(e){A.d(t,e,(function(){return a[e]}))}(n);t["default"]=r.a},f0cb:function(e,t,A){"use strict";var a=A("4ea4");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,A("96cf");var r=a(A("1da1")),n={onReady:function(){this.$refs.uForm.setRules(this.rules)},data:function(){var e=this;return{labelPosition:"left",border:!1,radioCheckWidth:"auto",radioCheckWrap:!1,form:{account:"",newpassword:"",type:"email",captcha:""},rules:{account:[{validator:function(t,A,a){return t.message="请填写".concat("email"==e.form.type?"邮箱":"手机号码"),!!A},message:"",trigger:"blur"}],newpassword:[{required:!0,message:"请输入新密码",trigger:"blur"}],captcha:[{required:!0,message:"请输入验证码",trigger:"blur"}]},codeTips:"",errorType:["message"]}},methods:{codeChange:function(e){this.codeTips=e},radioGroupChange:function(e){this.form.type=e},getCode:function(){var e=(0,r.default)(regeneratorRuntime.mark((function e(t){var A;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this.$refs.uCode.canGetCode){e.next=21;break}if(A={},"email"!=this.form.type){e.next=11;break}if(this.$u.test.email(this.form.account)){e.next=6;break}return this.$u.toast("邮箱格式不正确！"),e.abrupt("return");case 6:return e.next=8,this.$api.getEmsSend({email:this.form.account,event:"resetpwd"});case 8:A=e.sent,e.next=17;break;case 11:if(this.$u.test.mobile(this.form.account)){e.next=14;break}return this.$u.toast("手机号码格式不正确！"),e.abrupt("return");case 14:return e.next=16,this.$api.getSmsSend({mobile:this.form.account,event:"resetpwd"});case 16:A=e.sent;case 17:this.$u.toast(A.msg||"发送失败"),1==A.code&&this.$refs.uCode.start(),e.next=22;break;case 21:this.$u.toast("倒计时结束后再发送");case 22:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),submit:function(){var e=this;this.$refs.uForm.validate(function(){var t=(0,r.default)(regeneratorRuntime.mark((function t(A){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!A){t.next=10;break}return t.next=3,e.$api.goResetpwd({type:e.form.type,mobile:e.form.account,email:e.form.account,newpassword:e.form.newpassword,captcha:e.form.captcha});case 3:if(a=t.sent,a.code){t.next=7;break}return e.$u.toast(a.msg),t.abrupt("return");case 7:setTimeout((function(){e.$u.route({url:"/pages/login/login",type:"redirect"})}),800),t.next=11;break;case 10:e.$u.toast("验证失败");case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}}};t.default=n},f1ed:function(e,t,A){"use strict";A.r(t);var a=A("c71c"),r=A("21cb");for(var n in r)"default"!==n&&function(e){A.d(t,e,(function(){return r[e]}))}(n);A("b0dc");var i,o=A("f0c5"),s=Object(o["a"])(r["default"],a["b"],a["c"],!1,null,"21bdd9ea",null,!1,a["a"],i);t["default"]=s.exports},f9be:function(e,t,A){"use strict";A("a9e3"),A("ac1f"),A("5319"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a={name:"u-verification-code",props:{seconds:{type:[String,Number],default:60},startText:{type:String,default:"获取验证码"},changeText:{type:String,default:"X秒重新获取"},endText:{type:String,default:"重新获取"},keepRunning:{type:Boolean,default:!1},uniqueKey:{type:String,default:""}},data:function(){return{secNum:this.seconds,timer:null,canGetCode:!0}},mounted:function(){this.checkKeepRunning()},watch:{seconds:{immediate:!0,handler:function(e){this.secNum=e}}},methods:{checkKeepRunning:function(){var e=Number(uni.getStorageSync(this.uniqueKey+"_$uCountDownTimestamp"));if(!e)return this.changeEvent(this.startText);var t=Math.floor(+new Date/1e3);this.keepRunning&&e&&e>t?(this.secNum=e-t,uni.removeStorageSync(this.uniqueKey+"_$uCountDownTimestamp"),this.start()):this.changeEvent(this.startText)},start:function(){var e=this;this.timer&&(clearInterval(this.timer),this.timer=null),this.$emit("start"),this.canGetCode=!1,this.changeEvent(this.changeText.replace(/x|X/,this.secNum)),this.setTimeToStorage(),this.timer=setInterval((function(){--e.secNum?e.changeEvent(e.changeText.replace(/x|X/,e.secNum)):(clearInterval(e.timer),e.timer=null,e.changeEvent(e.endText),e.secNum=e.seconds,e.$emit("end"),e.canGetCode=!0)}),1e3)},reset:function(){this.canGetCode=!0,clearInterval(this.timer),this.secNum=this.seconds,this.changeEvent(this.endText)},changeEvent:function(e){this.$emit("change",e)},setTimeToStorage:function(){if(this.keepRunning&&this.timer&&this.secNum>0&&this.secNum<=this.seconds){var e=Math.floor(+new Date/1e3);uni.setStorage({key:this.uniqueKey+"_$uCountDownTimestamp",data:e+Number(this.secNum)})}}},beforeDestroy:function(){this.setTimeToStorage(),clearTimeout(this.timer),this.timer=null}};t.default=a}}]);