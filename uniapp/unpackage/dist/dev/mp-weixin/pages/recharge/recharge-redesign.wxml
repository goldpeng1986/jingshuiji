<view class="container data-v-2b66dc68"><u-navbar vue-id="4175319e-1" title="账户充值" autoBack="{{true}}" bgColor="#3b82f6" titleStyle="color: #ffffff; font-weight: 500" fixed="{{true}}" immersive="{{true}}" class="data-v-2b66dc68" bind:__l="__l"></u-navbar><view class="balance-card data-v-2b66dc68"><view class="card-content data-v-2b66dc68"><view class="balance-info data-v-2b66dc68"><text class="balance-label data-v-2b66dc68">当前余额</text><view class="balance-amount-row data-v-2b66dc68"><text class="currency data-v-2b66dc68">¥</text><text class="balance-amount data-v-2b66dc68">{{accountInfo.balance}}</text></view></view><view class="card-decoration data-v-2b66dc68"><u-icon vue-id="4175319e-2" name="wallet" size="80" color="rgba(255,255,255,0.1)" class="data-v-2b66dc68" bind:__l="__l"></u-icon></view></view><view class="card-footer data-v-2b66dc68"><view class="expense-item data-v-2b66dc68"><text class="expense-label data-v-2b66dc68">今日支出</text><text class="expense-value data-v-2b66dc68">{{"¥"+accountInfo.todayExpense}}</text></view><view class="expense-divider data-v-2b66dc68"></view><view class="expense-item data-v-2b66dc68"><text class="expense-label data-v-2b66dc68">本月支出</text><text class="expense-value data-v-2b66dc68">{{"¥"+accountInfo.monthExpense}}</text></view></view></view><view class="section data-v-2b66dc68"><view class="section-header data-v-2b66dc68"><text class="section-title data-v-2b66dc68">选择充值金额</text><text class="section-subtitle data-v-2b66dc68">选择或输入您想要充值的金额</text></view><view class="amount-grid data-v-2b66dc68"><block wx:for="{{amountOptions}}" wx:for-item="item" wx:for-index="index" wx:key="index"><view data-event-opts="{{[['tap',[['selectAmount',['$0'],[[['amountOptions','',index,'value']]]]]]]}}" class="{{['amount-item','data-v-2b66dc68',(selectedAmount===item.value)?'active':'']}}" bindtap="__e"><text class="amount-value data-v-2b66dc68">{{"¥"+item.value}}</text><text class="amount-desc data-v-2b66dc68">{{item.desc}}</text></view></block></view><view class="custom-amount-input data-v-2b66dc68"><view class="input-prefix data-v-2b66dc68"><text class="currency-symbol data-v-2b66dc68">¥</text></view><u-input vue-id="4175319e-3" type="number" placeholder="自定义充值金额" border="{{false}}" clearable="{{true}}" value="{{customAmount}}" data-event-opts="{{[['^input',[['__set_model',['','customAmount','$event',[]]],['onCustomAmountInput']]]]}}" bind:input="__e" class="data-v-2b66dc68" bind:__l="__l"></u-input></view><text class="input-tip data-v-2b66dc68">单次充值金额不低于1元，不超过1000元</text></view><view class="section data-v-2b66dc68"><view class="section-header data-v-2b66dc68"><text class="section-title data-v-2b66dc68">选择支付方式</text></view><view class="payment-options data-v-2b66dc68"><view data-event-opts="{{[['tap',[['selectPayment',['wechat']]]]]}}" class="{{['payment-option','data-v-2b66dc68',(paymentMethod==='wechat')?'active':'']}}" bindtap="__e"><view class="payment-icon wechat-icon data-v-2b66dc68"><u-icon vue-id="4175319e-4" name="weixin-fill" size="24" color="#07c160" class="data-v-2b66dc68" bind:__l="__l"></u-icon></view><text class="payment-name data-v-2b66dc68">微信支付</text></view><view data-event-opts="{{[['tap',[['selectPayment',['alipay']]]]]}}" class="{{['payment-option','data-v-2b66dc68',(paymentMethod==='alipay')?'active':'']}}" bindtap="__e"><view class="payment-icon alipay-icon data-v-2b66dc68"><u-icon vue-id="4175319e-5" name="zhifubao-circle-fill" size="24" color="#1677ff" class="data-v-2b66dc68" bind:__l="__l"></u-icon></view><text class="payment-name data-v-2b66dc68">支付宝</text></view><view data-event-opts="{{[['tap',[['selectPayment',['balance']]]]]}}" class="{{['payment-option','data-v-2b66dc68',(paymentMethod==='balance')?'active':'']}}" bindtap="__e"><view class="payment-icon balance-icon data-v-2b66dc68"><u-icon vue-id="4175319e-6" name="rmb-circle-fill" size="24" color="#f59e0b" class="data-v-2b66dc68" bind:__l="__l"></u-icon></view><text class="payment-name data-v-2b66dc68">余额支付</text></view></view></view><view data-event-opts="{{[['tap',[['showCouponList',['$event']]]]]}}" class="coupon-selector data-v-2b66dc68" bindtap="__e"><view class="selector-left data-v-2b66dc68"><u-icon vue-id="4175319e-7" name="coupon" size="20" color="#3b82f6" class="data-v-2b66dc68" bind:__l="__l"></u-icon><text class="selector-label data-v-2b66dc68">优惠券</text></view><view class="selector-right data-v-2b66dc68"><text class="coupon-info data-v-2b66dc68">{{selectedCoupon?selectedCoupon.name:'无可用优惠券'}}</text><u-icon vue-id="4175319e-8" name="arrow-right" size="16" color="#c0c4cc" class="data-v-2b66dc68" bind:__l="__l"></u-icon></view></view><view class="recharge-summary data-v-2b66dc68"><view class="summary-item data-v-2b66dc68"><text class="summary-label data-v-2b66dc68">充值金额</text><text class="summary-value data-v-2b66dc68">{{"¥"+finalAmount}}</text></view><block wx:if="{{selectedCoupon}}"><view class="summary-item data-v-2b66dc68"><text class="summary-label data-v-2b66dc68">优惠券</text><text class="summary-value data-v-2b66dc68">{{"-¥"+selectedCoupon.amount}}</text></view></block><view class="summary-item total data-v-2b66dc68"><text class="summary-label data-v-2b66dc68">实付金额</text><text class="summary-value data-v-2b66dc68">{{"¥"+actualAmount}}</text></view></view><view class="recharge-btn-container data-v-2b66dc68"><u-button vue-id="4175319e-9" type="primary" shape="circle" customStyle="{{({background:'linear-gradient(to right, #3b82f6, #1d4ed8)'})}}" data-event-opts="{{[['^click',[['confirmRecharge']]]]}}" bind:click="__e" class="data-v-2b66dc68" bind:__l="__l" vue-slots="{{['default']}}">确认充值</u-button><text class="agreement-text data-v-2b66dc68">点击充值即表示您同意<text data-event-opts="{{[['tap',[['viewAgreement',['$event']]]]]}}" class="agreement-link data-v-2b66dc68" bindtap="__e">《充值服务协议》</text></text></view><u-popup vue-id="4175319e-10" show="{{showCoupons}}" mode="bottom" borderRadius="16" safeAreaInsetBottom="{{true}}" data-event-opts="{{[['^close',[['closeCouponList']]]]}}" bind:close="__e" class="data-v-2b66dc68" bind:__l="__l" vue-slots="{{['default']}}"><view class="coupon-popup data-v-2b66dc68"><view class="popup-header data-v-2b66dc68"><text class="popup-title data-v-2b66dc68">选择优惠券</text><u-icon vue-id="{{('4175319e-11')+','+('4175319e-10')}}" name="close" size="20" color="#909399" data-event-opts="{{[['^click',[['closeCouponList']]]]}}" bind:click="__e" class="data-v-2b66dc68" bind:__l="__l"></u-icon></view><scroll-view class="coupon-list data-v-2b66dc68" scroll-y="{{true}}"><block wx:for="{{availableCoupons}}" wx:for-item="item" wx:for-index="index" wx:key="index"><view data-event-opts="{{[['tap',[['selectCoupon',['$0'],[[['availableCoupons','',index]]]]]]]}}" class="{{['coupon-item','data-v-2b66dc68',(selectedCouponId===item.id)?'selected':'']}}" bindtap="__e"><view class="coupon-left data-v-2b66dc68" style="{{'background-color:'+(item.bgColor)+';'}}"><text class="coupon-amount data-v-2b66dc68">{{"¥"+item.amount}}</text><text class="coupon-condition data-v-2b66dc68">{{item.condition}}</text></view><view class="coupon-right data-v-2b66dc68"><view class="coupon-info data-v-2b66dc68"><text class="coupon-name data-v-2b66dc68">{{item.name}}</text><text class="coupon-desc data-v-2b66dc68">{{item.description}}</text></view><view class="coupon-validity data-v-2b66dc68"><text class="data-v-2b66dc68">{{"有效期至: "+item.validity}}</text></view></view><view class="coupon-check data-v-2b66dc68"><block wx:if="{{selectedCouponId===item.id}}"><u-icon vue-id="{{('4175319e-12-'+index)+','+('4175319e-10')}}" name="checkmark-circle" size="20" color="#3b82f6" class="data-v-2b66dc68" bind:__l="__l"></u-icon></block><block wx:else><view class="check-circle data-v-2b66dc68"></view></block></view></view></block><view data-event-opts="{{[['tap',[['selectCoupon',[null]]]]]}}" class="no-coupon-item data-v-2b66dc68" bindtap="__e"><text class="no-coupon-text data-v-2b66dc68">不使用优惠券</text><view class="coupon-check data-v-2b66dc68"><block wx:if="{{selectedCouponId===null}}"><u-icon vue-id="{{('4175319e-13')+','+('4175319e-10')}}" name="checkmark-circle" size="20" color="#3b82f6" class="data-v-2b66dc68" bind:__l="__l"></u-icon></block><block wx:else><view class="check-circle data-v-2b66dc68"></view></block></view></view></scroll-view><view class="popup-footer data-v-2b66dc68"><u-button vue-id="{{('4175319e-14')+','+('4175319e-10')}}" type="primary" shape="circle" data-event-opts="{{[['^click',[['confirmCouponSelection']]]]}}" bind:click="__e" class="data-v-2b66dc68" bind:__l="__l" vue-slots="{{['default']}}">确认</u-button></view></view></u-popup></view>