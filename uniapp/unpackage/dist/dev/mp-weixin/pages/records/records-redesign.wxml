<view class="container data-v-6826fc02"><u-navbar vue-id="c68df578-1" title="使用记录" autoBack="{{true}}" bgColor="#ffffff" titleStyle="color: #333333; font-weight: 600" fixed="{{true}}" border="{{false}}" immersive="{{true}}" class="data-v-6826fc02" bind:__l="__l"></u-navbar><view class="stats-section data-v-6826fc02"><u-swiper vue-id="c68df578-2" list="{{statCards}}" keyName="content" height="{{220}}" radius="{{16}}" interval="{{3000}}" effect3d="{{true}}" autoplay="{{false}}" indicatorMode="dot" class="data-v-6826fc02" bind:__l="__l"></u-swiper></view><view class="chart-section data-v-6826fc02"><view class="chart-header data-v-6826fc02"><text class="chart-title data-v-6826fc02">用水趋势</text><view class="chart-period-selector data-v-6826fc02"><block wx:for="{{periodOptions}}" wx:for-item="item" wx:for-index="index" wx:key="index"><view data-event-opts="{{[['tap',[['setPeriod',['$0'],[[['periodOptions','',index,'value']]]]]]]}}" class="{{['period-option','data-v-6826fc02',(currentPeriod===item.value)?'active':'']}}" bindtap="__e"><text class="data-v-6826fc02">{{item.label}}</text></view></block></view></view><view class="chart-placeholder data-v-6826fc02"><view class="chart-mock data-v-6826fc02"><block wx:for="{{mockChartData}}" wx:for-item="item" wx:for-index="index" wx:key="index"><view class="chart-bar data-v-6826fc02" style="{{'height:'+(item+'rpx')+';'}}"></view></block></view><view class="chart-labels data-v-6826fc02"><block wx:for="{{7}}" wx:for-item="item" wx:for-index="index" wx:key="index"><text class="data-v-6826fc02">{{index+1+"日"}}</text></block></view></view></view><view class="filter-section data-v-6826fc02"><u-dropdown vue-id="c68df578-3" class="data-v-6826fc02" bind:__l="__l" vue-slots="{{['default']}}"><u-dropdown-item bind:input="__e" vue-id="{{('c68df578-4')+','+('c68df578-3')}}" title="设备" options="{{deviceOptions}}" value="{{deviceFilter}}" data-event-opts="{{[['^input',[['__set_model',['','deviceFilter','$event',[]]]]]]}}" class="data-v-6826fc02" bind:__l="__l"></u-dropdown-item><u-dropdown-item bind:input="__e" vue-id="{{('c68df578-5')+','+('c68df578-3')}}" title="日期" options="{{dateOptions}}" value="{{dateFilter}}" data-event-opts="{{[['^input',[['__set_model',['','dateFilter','$event',[]]]]]]}}" class="data-v-6826fc02" bind:__l="__l"></u-dropdown-item><u-dropdown-item bind:input="__e" vue-id="{{('c68df578-6')+','+('c68df578-3')}}" title="排序" options="{{sortOptions}}" value="{{sortFilter}}" data-event-opts="{{[['^input',[['__set_model',['','sortFilter','$event',[]]]]]]}}" class="data-v-6826fc02" bind:__l="__l"></u-dropdown-item></u-dropdown></view><scroll-view class="records-scroll data-v-6826fc02" scroll-y="{{true}}" refresher-enabled="{{true}}" refresher-triggered="{{isRefreshing}}" data-event-opts="{{[['scrolltolower',[['loadMore',['$event']]]],['refresherrefresh',[['onRefresh',['$event']]]]]}}" bindscrolltolower="__e" bindrefresherrefresh="__e"><view class="records-list data-v-6826fc02"><block wx:for="{{$root.l1}}" wx:for-item="group" wx:for-index="groupIndex" wx:key="groupIndex"><view class="date-group data-v-6826fc02"><view class="date-header data-v-6826fc02"><view class="date-badge data-v-6826fc02"><text class="data-v-6826fc02">{{group.$orig.date}}</text></view></view><block wx:for="{{group.l0}}" wx:for-item="item" wx:for-index="index" wx:key="index"><view data-event-opts="{{[['tap',[['viewRecordDetail',['$0'],[[['groupedRecords','',groupIndex],['records','',index]]]]]]]}}" class="record-card data-v-6826fc02" bindtap="__e"><view class="record-left data-v-6826fc02"><view class="record-icon data-v-6826fc02" style="{{'background-color:'+(item.m0)+';'}}"><u-icon vue-id="{{'c68df578-7-'+groupIndex+'-'+index}}" name="arrow-down" color="#ffffff" size="24" class="data-v-6826fc02" bind:__l="__l"></u-icon></view></view><view class="record-content data-v-6826fc02"><view class="record-header data-v-6826fc02"><text class="record-title data-v-6826fc02">{{item.$orig.deviceName}}</text><text class="record-amount data-v-6826fc02">{{"-¥"+item.$orig.amount}}</text></view><view class="record-details data-v-6826fc02"><view class="record-detail-item data-v-6826fc02"><u-icon vue-id="{{'c68df578-8-'+groupIndex+'-'+index}}" name="clock" size="14" color="#909399" class="data-v-6826fc02" bind:__l="__l"></u-icon><text class="detail-text data-v-6826fc02">{{item.$orig.time}}</text></view><view class="record-detail-item data-v-6826fc02"><u-icon vue-id="{{'c68df578-9-'+groupIndex+'-'+index}}" name="map" size="14" color="#909399" class="data-v-6826fc02" bind:__l="__l"></u-icon><text class="detail-text data-v-6826fc02">{{item.$orig.location}}</text></view></view><view class="record-footer data-v-6826fc02"><view class="volume-badge data-v-6826fc02"><text class="data-v-6826fc02">{{item.$orig.volume+"L"}}</text></view><u-button vue-id="{{'c68df578-10-'+groupIndex+'-'+index}}" type="info" size="mini" shape="circle" plain="{{true}}" data-event-opts="{{[['^click',[['viewRecordDetail',['$0'],[[['groupedRecords','',groupIndex],['records','',index]]]]]]]}}" catch:click="__e" class="data-v-6826fc02" bind:__l="__l" vue-slots="{{['default']}}">详情</u-button></view></view></view></block></view></block><block wx:if="{{$root.g0===0}}"><view class="empty-state data-v-6826fc02"><u-empty vue-id="c68df578-11" mode="list" icon="http://cdn.uviewui.com/uview/empty/list.png" text="暂无使用记录" textColor="#909399" iconSize="240" class="data-v-6826fc02" bind:__l="__l"></u-empty></view></block><block wx:if="{{$root.g1>0}}"><u-loadmore vue-id="c68df578-12" status="{{loadMoreStatus}}" marginTop="20" marginBottom="20" bgColor="transparent" class="data-v-6826fc02" bind:__l="__l"></u-loadmore></block></view></scroll-view><u-popup vue-id="c68df578-13" show="{{showDetail}}" mode="center" borderRadius="16" width="80%" height="auto" data-event-opts="{{[['^close',[['closeDetail']]]]}}" bind:close="__e" class="data-v-6826fc02" bind:__l="__l" vue-slots="{{['default']}}"><block wx:if="{{selectedRecord}}"><view class="record-detail-popup data-v-6826fc02"><view class="popup-header data-v-6826fc02"><text class="popup-title data-v-6826fc02">用水详情</text><u-icon vue-id="{{('c68df578-14')+','+('c68df578-13')}}" name="close" size="24" color="#909399" data-event-opts="{{[['^click',[['closeDetail']]]]}}" bind:click="__e" class="data-v-6826fc02" bind:__l="__l"></u-icon></view><view class="popup-content data-v-6826fc02"><view class="detail-item data-v-6826fc02"><text class="detail-label data-v-6826fc02">设备名称</text><text class="detail-value data-v-6826fc02">{{selectedRecord.deviceName}}</text></view><view class="detail-item data-v-6826fc02"><text class="detail-label data-v-6826fc02">使用时间</text><text class="detail-value data-v-6826fc02">{{selectedRecord.time}}</text></view><view class="detail-item data-v-6826fc02"><text class="detail-label data-v-6826fc02">使用地点</text><text class="detail-value data-v-6826fc02">{{selectedRecord.location}}</text></view><view class="detail-item data-v-6826fc02"><text class="detail-label data-v-6826fc02">用水量</text><text class="detail-value data-v-6826fc02">{{selectedRecord.volume+"L"}}</text></view><view class="detail-item data-v-6826fc02"><text class="detail-label data-v-6826fc02">消费金额</text><text class="detail-value data-v-6826fc02">{{"¥"+selectedRecord.amount}}</text></view><view class="detail-item data-v-6826fc02"><text class="detail-label data-v-6826fc02">支付方式</text><text class="detail-value data-v-6826fc02">账户余额</text></view><view class="detail-item data-v-6826fc02"><text class="detail-label data-v-6826fc02">交易单号</text><text class="detail-value data-v-6826fc02">{{$root.m1}}</text></view></view><view class="popup-footer data-v-6826fc02"><u-button vue-id="{{('c68df578-15')+','+('c68df578-13')}}" type="primary" shape="circle" data-event-opts="{{[['^click',[['closeDetail']]]]}}" bind:click="__e" class="data-v-6826fc02" bind:__l="__l" vue-slots="{{['default']}}">确定</u-button></view></view></block></u-popup></view>